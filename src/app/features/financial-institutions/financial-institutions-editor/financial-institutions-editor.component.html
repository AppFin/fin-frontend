<fin-editor-layout
  [title]="this.editorType() == editorTypes.Create ? 'finCore.actions.creating' : 'finCore.actions.editing'"
  [loading]="loading()"
  [formGroup]="formGroup"
  [canSave]="canSave"
  [isSaving]="saving()"
  (onSave)="save()"
  (onCancel)="fechar()"
>
  @if (!loading()) {
    <fin-input 
      label="finCore.features.financialInstitutions.name" 
      helpText="finCore.features.financialInstitutions.nameHelp"
      [formControl]="formGroup.controls.name" 
    />
    
    <fin-select
      label="finCore.features.financialInstitutions.type"
      [formControl]="formGroup.controls.type"
      [options]="institutionTypeOptions"
    />
    
    <fin-select
      label="finCore.features.financialInstitutions.code"
      helpText="finCore.features.financialInstitutions.codeHelp"
      [formControl]="formGroup.controls.code"
      [options]="bankCodeOptions()"
    />
    
    <fin-input 
      label="finCore.features.financialInstitutions.icon" 
      helpText="finCore.features.financialInstitutions.iconHelp"
      [formControl]="formGroup.controls.icon" 
    />
    
    <fin-toggle-switch
      label="finCore.features.shared.active"
      [formControl]="formGroup.controls.active"
    />
    
    @if (iconPreviewPath()) {
      <div class="icon-preview-container">
        <label class="icon-preview-label">{{ 'finCore.features.financialInstitutions.iconPreview' | finTranslate }}</label>
        <img [src]="iconPreviewPath()" alt="Bank Icon" style="width: 60px; height: 60px; object-fit: contain; border-radius: 8px;" />
      </div>
    } @else if (formGroup.controls.code.value && !iconPreviewPath()) {
      <div class="icon-preview-container">
        <label class="icon-preview-label">{{ 'finCore.features.financialInstitutions.iconPreview' | finTranslate }}</label>
        <div class="icon-not-found">
          <i class="pi pi-image" style="font-size: 3rem; color: var(--color-disabled);"></i>
          <p style="color: var(--color-disabled); margin-top: 8px;">Ícone não encontrado</p>
        </div>
      </div>
    }
  }
</fin-editor-layout>
