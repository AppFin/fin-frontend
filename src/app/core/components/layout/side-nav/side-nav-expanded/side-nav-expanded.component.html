<div class="drawer-container">
    <div class="drawer-header">
        <fin-text
                text="Pinneds menus"
                type="subtitle"
                severity="primary"
        />

        <button class="action-btn" (click)="toggleSideNav()">
            <fin-icon
                    tooltip="finCore.layout.closeMenu"
                    icon="chevron-left"
                    size="md"
            />
        </button>
    </div>

    <div class="menus-container">
        <div class="pinned-menus">
            @for (menu of menus(); track menu.id) {
                <ng-container *ngTemplateOutlet="menuBtn; context: {menu: menu}"/>
            } @empty {
                vazio
            }
        </div>

        <div class="unpinned-menus">
            <div class="unpinned-menus-header">
                <fin-text
                        text="Unpinned menus"
                        type="subtitle"
                        severity="primary"
                />

                <button class="action-btn" (click)="unpinnedOpened.set(!unpinnedOpened())">
                    <fin-icon
                            [tooltip]="unpinnedOpened() ? 'finCore.actions.close' : 'finCore.actions.open'"
                            [icon]="unpinnedOpened() ? 'chevron-down' : 'chevron-up'"
                            size="md"
                    />
                </button>
            </div>

            @if (unpinnedOpened()) {
                <div [@ifVertical] class="unpinned-container">
                    @for (menu of menus(); track menu.id) {
                        <ng-container *ngTemplateOutlet="unpinnedOption; context: {menu: menu}"/>
                    } @empty {
                        vazio
                    }
                </div>
            }
        </div>

    </div>
</div>

<ng-template #menu>
    <div class="example-menu" cdkMenu>
        <button class="example-menu-item" cdkMenuItem>Unpin</button>
    </div>
</ng-template>

<ng-template #menuBtn let-menu="menu">
    <button
            [routerLink]="menu.frontRoute"
            class="menu-option"
            (click)="optionClicked()"
            [cdkContextMenuTriggerFor]="menu"
    >
        <fin-icon
                class="drag-icon"
                size="sm"
                icon="bars"
                severity="secondary"
                tooltip="Alterar ordem"
        />

        <fin-icon [tooltip]="menu.name" [icon]="menu.icon" [iconColor]="menu.color" size="md"/>
        <fin-text [text]="menu.name" type="paragraph"/>
    </button>
</ng-template>

<ng-template #unpinnedOption let-menu="menu">
    <button [routerLink]="menu.frontRoute" class="unpinned-btn" (click)="optionClicked()">
        <fin-icon [tooltip]="menu.name" [icon]="menu.icon" [iconColor]="menu.color" size="md"/>
        <fin-text [text]="menu.name" type="paragraph"/>

        <span class="spacer"></span>

        <fin-button
                class="pin-icon"
                icon="plus"
                iconTooltip="Pin"
        />
    </button>
</ng-template>
